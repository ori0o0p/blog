<div class="category-tree">
  <h2 class="tree-title">카테고리</h2>
  
  <div class="tree-container">
    {% for category_data in site.data.categories %}
      <div class="category-item">
        <div class="category-header">
          <button class="toggle-btn" data-target="{{ category_data.name | slugify }}">
            <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
          <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          <a href="{{ site.baseurl }}/category/{{ category_data.name | slugify }}/" class="category-link">{{ category_data.title }}</a>
        </div>
        
        <div class="subcategory-container" id="{{ category_data.name | slugify }}-container">
          {% if category_data.subcategories %}
            {% for subcategory in category_data.subcategories %}
              <div class="subcategory-item">
                <div class="subcategory-header">
                  <button class="toggle-btn" data-target="{{ subcategory.name | slugify }}">
                    <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                  </button>
                  <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                  </svg>
                  <a href="{{ site.baseurl }}/category/{{ subcategory.name | slugify }}/" class="category-link">{{ subcategory.title }}</a>
                </div>
                
                <div class="posts-container" id="{{ subcategory.name | slugify }}-container">
                  {% assign filtered_posts = site.posts | where: "subcategory", subcategory.name %}
                  {% for post in filtered_posts %}
                    <div class="post-item">
                      <svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                      </svg>
                      <a href="{{ post.url | relative_url }}" class="post-link">{{ post.title }}</a>
                    </div>
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
          {% endif %}
          
          {% assign direct_posts = site.posts | where: "category", category_data.name | where_exp: "post", "post.subcategory == nil" %}
          {% for post in direct_posts %}
            <div class="post-item">
              <svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
              <a href="{{ post.url | relative_url }}" class="post-link">{{ post.title }}</a>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>
